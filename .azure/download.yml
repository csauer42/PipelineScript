parameters:
- name: sampleVersion
  type: string
- name: mainVersion
  type: string
- name: avrVersion
  type: string
- name: pkgFeed
  type: string
  default: '477fc493-2c12-4877-954a-3040372f2485/40809f3d-1cfb-45c7-b7e3-589968369bc9'

steps:
- task: UniversalPackages@0
  condition: eq('${{ parameters.sampleVersion }}'', '')
  inputs:
    command: 'download'
    downloadDirectory: '$(Build.ArtifactStagingDirectory)'
    feedsToUse: 'internal'
    vstsFeed: ${{ parameters.pkgFeed }}
    vstsFeedPackage: 'sample.bin'
    vstsPackageVersion: '${{ parameters.sampleVersion }}'
- task: UniversalPackages@0
  condition: ne(${{ parameters.mainVersion }}, '')
  inputs:
    command: 'download'
    downloadDirectory: '$(Build.ArtifactStagingDirectory)'
    feedsToUse: 'internal'
    vstsFeed: ${{ parameters.pkgFeed }}
    vstsFeedPackage: 'main.hex'
    vstsPackageVersion: '${{ parameters.mainVersion }}'
- task: UniversalPackages@0
  condition: eq('${{ parameters.avrVersion }}', '')
  inputs:
    command: 'download'
    downloadDirectory: '$(Build.ArtifactStagingDirectory)'
    feedsToUse: 'internal'
    vstsFeed: ${{ parameters.pkgFeed }}
    vstsFeedPackage: 'avr-common'
    vstsPackageVersion: '${{ parameters.avrVersion }}'